{"version":3,"sources":["webpack:///./src/components/admin/workflow/Workflow.vue?2404","webpack:///src/components/admin/workflow/Workflow.vue","webpack:///./src/components/admin/workflow/Workflow.vue?44ec","webpack:///./src/components/admin/workflow/Workflow.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","staticClass","on","back","_v","domProps","_s","currentStep","message","proxy","attrs","component","tag","values","done","cancel","_e","staticRenderFns","name","components","AdminContainer","ArrowLeftCircleIcon","WorkflowIndex","WorkflowMenu","WorkflowSearch","props","workflow","type","Array","required","data","workflowStack","computed","index","find","step","slice","forEach","Object","assign","value","mounted","$route","params","workflowKey","jumpToStep","push","methods","length","loadStep","clearStack","splice","window","deviseSettings","$bus","$emit","$router","go","s","$set","stepToLoad","end","nextStep","lastStep","stepAfterNext","console","warn"],"mappings":"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","file":"js/chunk-2d0d0455.d65bf1fb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.currentStep)?_c('admin-container',{scopedSlots:_vm._u([{key:\"message\",fn:function(){return [_c('div',{staticClass:\"flex items-center\"},[_c('div',{staticClass:\"dvs-cursor-pointer dvs-flex dvs-flex-col dvs-items-center\",on:{\"click\":_vm.back}},[_c('arrow-left-circle-icon',{staticClass:\"mb-1\"}),_c('span',{staticClass:\"dvs-text-2xs dvs-uppercase\"},[_vm._v(\"Back\")])],1),_c('div',{staticClass:\"dvs-px-8\",domProps:{\"innerHTML\":_vm._s(_vm.currentStep.message)}})])]},proxy:true},{key:\"content\",fn:function(){return [_c('transition',{attrs:{\"name\":\"dvs-fade\",\"mode\":\"out-in\"}},[_c(_vm.currentStep.component,{tag:\"component\",attrs:{\"step\":_vm.currentStep,\"values\":_vm.values},on:{\"done\":_vm.done,\"cancel\":_vm.cancel}})],1)]},proxy:true}],null,false,2452802325)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <admin-container v-if=\"currentStep\">\n    <template v-slot:message>\n      <div class=\"flex items-center\">\n        <div class=\"dvs-cursor-pointer dvs-flex dvs-flex-col dvs-items-center\" @click=\"back\">\n          <arrow-left-circle-icon class=\"mb-1\"></arrow-left-circle-icon>\n          <span class=\"dvs-text-2xs dvs-uppercase\">Back</span>\n        </div>\n        <!-- eslint-disable vue/no-v-html -->\n        <div class=\"dvs-px-8\" v-html=\"currentStep.message\"></div>\n      </div>\n    </template>\n    <template v-slot:content>\n      <transition name=\"dvs-fade\" mode=\"out-in\">\n        <component\n          :is=\"currentStep.component\"\n          :step=\"currentStep\"\n          :values=\"values\"\n          @done=\"done\"\n          @cancel=\"cancel\"\n        ></component>\n      </transition>\n    </template>\n  </admin-container>\n</template>\n\n<script>\nexport default {\n  name: 'DeviseWorkflow',\n  components: {\n    AdminContainer: () => import('../ui/AdminContainer'),\n    ArrowLeftCircleIcon: () => import('vue-feather-icons/icons/ArrowLeftCircleIcon'),\n    WorkflowIndex: () => import('./WorkflowIndex'),\n    WorkflowMenu: () => import('./WorkflowMenu'),\n    WorkflowSearch: () => import('./WorkflowSearch'),\n  },\n  props: {\n    workflow: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      workflowStack: [],\n    }\n  },\n  computed: {\n    index() {\n      return this.workflow.find((step) => {\n        return step.index\n      })\n    },\n    currentStep() {\n      return this.workflowStack.slice(-1)[0]\n    },\n    values() {\n      let values = {}\n      this.workflowStack.forEach((step) => {\n        values = Object.assign(values, step.value)\n      })\n      return values\n    },\n  },\n  mounted() {\n    if (this.$route.params && this.$route.params.workflowKey) {\n      this.jumpToStep(this.$route.params.workflowKey)\n    } else if (this.index) {\n      this.workflowStack.push(this.index)\n    }\n  },\n  methods: {\n    done(data) {\n      this.workflowStack[this.workflowStack.length - 1].value = data\n      this.loadStep()\n    },\n    cancel() {\n      this.clearStack()\n    },\n    back() {\n      if (this.workflowStack.length > 1) {\n        this.workflowStack.splice(-1, 1)\n        delete this.currentStep.value\n        window.deviseSettings.$bus.$emit('dvs-admin-container-content-changed')\n      } else {\n        this.$router.go(-1)\n      }\n    },\n    jumpToStep(jumpToStep) {\n      const stepToLoad = this.workflow.find((s) => {\n        return s.key === jumpToStep\n      })\n      this.$set(stepToLoad, 'jumpedTo', true)\n      this.$set(stepToLoad, 'jumpedToParams', this.$route.params)\n      this.workflowStack.push(stepToLoad)\n    },\n    loadStep() {\n      let stepToLoad = null\n\n      if (this.currentStep.end || (this.currentStep.value && this.currentStep.value.end)) {\n        this.clearStack()\n        return\n      }\n\n      const lastStep = this.workflowStack[this.workflowStack.length - 2]\n      let nextStep = null\n      if (typeof this.currentStep.nextStep !== 'undefined') {\n        nextStep = this.currentStep.nextStep\n      } else if (typeof this.currentStep.value !== 'undefined') {\n        nextStep = this.currentStep.value.nextStep\n      }\n\n      // If a next step\n      if (nextStep) {\n        stepToLoad = this.workflow.find((s) => {\n          return s.key === nextStep\n        })\n      } else if (lastStep && lastStep.value.stepAfterNext) {\n        stepToLoad = this.workflow.find((s) => {\n          return s.key === lastStep.value.stepAfterNext\n        })\n      }\n\n      if (stepToLoad) {\n        this.workflowStack.push(Object.assign({}, stepToLoad))\n        window.deviseSettings.$bus.$emit('dvs-admin-container-content-changed')\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn(`There is no step registered as ${nextStep}`)\n      }\n    },\n    clearStack() {\n      this.workflowStack = [this.index]\n      window.deviseSettings.$bus.$emit('dvs-admin-container-content-changed')\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workflow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workflow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Workflow.vue?vue&type=template&id=34cb524c&\"\nimport script from \"./Workflow.vue?vue&type=script&lang=js&\"\nexport * from \"./Workflow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}