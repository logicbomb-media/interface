(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0afdcd"],{"0fab":function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("li",{staticClass:"dvs-collapsable bg-gray-100 dvs-px-4 dvs-py-3 dvs-text-xs dvs-font-medium dvs-rounded-md",class:{"dvs-open":e.sliceOpen}},[t("a",{staticClass:"text-gray-900 flex items-center",attrs:{href:"#","aria-current":"page"}},[t("div",{staticClass:"handle dvs-mr-2 dvs-cursor-move dvs-opacity-50"},[t("menu-icon")],1),t("div",{staticClass:"dvs-relative dvs-w-full dvs-font-xs dvs-cursor-pointer dvs-truncate",class:{"dvs-opacity-75":!e.sliceHasFieldsOrSlices},attrs:{dusk:"slice-label"},domProps:{innerHTML:e._s(e.editorLabel)},on:{click:function(s){return e.toggleSlice()},mouseenter:function(s){return e.markSlice(!0,e.slice)},mouseleave:function(s){return e.markSlice(!1,e.slice)}}})]),t("portal",{attrs:{to:"devise-root"}},[e.showCopyToAnotherPage?t("copy-slice-to-page",{attrs:{slice:e.slice},on:{close:function(s){e.showCopyToAnotherPage=!1}}}):e._e()],1),!0===e.manageSlice?t("manage-slice",{ref:"manageslice",attrs:{mode:e.manageSliceMode},on:{cancel:function(s){e.manageSlice=!1},addSlice:e.addSlice,editSlice:e.editSlice,removeSlice:e.removeSlice},model:{value:e.sliceToManage,callback:function(s){e.sliceToManage=s},expression:"sliceToManage"}}):e._e(),e.sliceOpen?t("div",{staticClass:"dvs-collapsed dvs-px-4"},[t("div",{staticClass:"dvs-pt-2 dvs-flex dvs-items-end dvs-flex-wrap"},[t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-mr-1\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",class:{"dvs-cursor-pointer":e.hasChildSlot,"dvs-cursor-not-allowed dvs-opacity-50":!e.hasChildSlot},staticStyle:{width:"50px"},on:{click:function(s){return e.requestInsertSlice()}}},[t("add-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Slice")])],1)]),t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-mr-1\n            dvs-cursor-pointer\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",staticStyle:{width:"50px"},on:{click:function(s){return e.jumpToSlice()}}},[t("locate-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Find")])],1)]),t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-cursor-pointer\n            dvs-mr-1\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",staticStyle:{width:"50px"},on:{click:function(s){return e.copySlice(e.slice,!1)}}},[t("copy-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Duplicate")])],1)]),t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-cursor-pointer\n            dvs-mr-1\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",staticStyle:{width:"50px"},on:{click:function(s){return e.sliceSettings()}}},[t("cog-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Settings")])],1)]),t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-cursor-pointer\n            dvs-mr-1\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",staticStyle:{width:"50px"},on:{click:function(s){return e.requestEditSlice()}}},[t("create-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Edit")])],1)]),t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-cursor-pointer\n            dvs-mr-1\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",staticStyle:{width:"50px"},on:{click:function(s){return e.removeSlice()}}},[t("remove-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Remove")])],1)]),t("div",[t("div",{staticClass:"\n            dvs-opacity-50\n            hover:dvs-opacity-100\n            dvs-text-xs\n            dvs-bg-admin-secondary-bg\n            dvs-text-admin-secondary-fg\n            dvs-rounded\n            dvs-cursor-pointer\n            dvs-mr-1\n            dvs-items-center\n            dvs-flex\n            dvs-flex-col\n            dvs-mb-2\n            dvs-rounded-sm\n            dvs-p-2\n          ",staticStyle:{width:"50px"},on:{click:function(s){return e.requestCopyToAnotherPage()}}},[t("copy-icon",{attrs:{w:"25",h:"25"}}),t("div",{staticClass:"dvs-text-xs dvs-text-center dvs-leading-none dvs-pt-2"},[e._v("Copy")])],1)])]),"model"!==e.slice.metadata.type&&e.sliceConfig(e.slice).fields?t("slice-editor-fields",{attrs:{"the-fields":e.sliceConfig(e.slice).fields},on:{editfield:e.editField},model:{value:e.theFields,callback:function(s){e.theFields=s},expression:"theFields"}}):e._e()],1):e._e(),"model"===e.slice.metadata.type?t("div",{staticClass:"dvs-collapsed dvs-px-6 dvs-text-sm"},[t("div",{staticClass:"dvs-mb-8"},[t("help",[e._v(" Be aware that these entries are model entries. That means they are managed in your database by another tool or by an admin section in your adminitration. ")])],1),e._l(e.pageSlices,(function(s,n){return t("div",{key:n,staticClass:"dvs-px-4 dvs-flex dvs-items-center"},[s.settings&&s.settings.admin&&s.settings.admin.route?t("div",{staticClass:"dvs-cursor-pointer",on:{click:function(t){return e.goToModel(s)}}},[t("link-icon")],1):e._e(),t("div",{staticClass:"dvs-mb-2 dvs-ml-4",domProps:{innerHTML:e._s(e.buildEditorLabel(s,null))}})])}))],2):e._e(),e.hasChildSlot?t("div",{staticClass:"dvs-collapsed dvs-px-4 dvs-pl-6 dvs-mt-6",style:{minHeight:"15px"}},["model"!==e.slice.metadata.type?t("draggable",e._b({directives:[{name:"devise-opacity",rawName:"v-devise-opacity.background",value:.5,expression:"0.5",modifiers:{background:!0}}],staticClass:"dvs-bg-admin-secondary-bg dvs-rounded-lg dvs-py-1 dvs-pt-3 dvs-mt-1 dvs-mb-6",attrs:{list:e.sliceSlices,tag:"ul"}},"draggable",{group:{name:"slices"},animation:200,ghostClass:"dvs-ghost",handle:".handle",dragClass:"dvs-chosen-drag-slice",emptyInsertThreshold:10,removeCloneOnHide:!1},!1),[e._l(e.sliceSlices,(function(s,n){return[t("slice-editor",{key:e.randomString(8,n),attrs:{child:!0},on:{addSlice:e.addSlice,editSlice:e.editSlice,removeSlice:e.removeSlice,copySlice:e.copySlice},model:{value:e.sliceSlices[n],callback:function(s){e.$set(e.sliceSlices,n,s)},expression:"sliceSlices[k]"}})]}))],2):e._e(),e.sliceSlices.length<1?t("div",{staticClass:"dvs-p-4 dvs-text-xs dvs-leading-normal dvs-instructions"},[e._v(' You can add child slices by dragging them here or by using the menu above and selecting "+ Slice" ')]):e._e()],1):e._e()],1)},i=[],d=t("53ca"),c=t("5530"),a=(t("d3b7"),t("3ca3"),t("ddb0"),t("fb6a"),t("b64b"),t("b0c0"),t("99af"),t("2f62")),l=t("29ec"),o={name:"SliceEditor",components:{AddIcon:function(){return t.e("chunk-ac0b0a96").then(t.bind(null,"be52"))},CogIcon:function(){return t.e("chunk-ac3135dc").then(t.bind(null,"8dd5"))},CopyIcon:function(){return t.e("chunk-ac39fa52").then(t.bind(null,"01de"))},CreateIcon:function(){return t.e("chunk-ac0a922c").then(t.bind(null,"d768"))},draggable:function(){return t.e("chunk-4a5f46a6").then(t.t.bind(null,"b76a",7))},LocateIcon:function(){return t.e("chunk-ac08b9f4").then(t.bind(null,"f832"))},LinkIcon:function(){return t.e("chunk-ac0bfa54").then(t.bind(null,"ad75"))},ManageSlice:function(){return t.e("chunk-2d0d6f55").then(t.bind(null,"7589"))},MenuIcon:function(){return t.e("chunk-ac32a588").then(t.bind(null,"83e1"))},RemoveIcon:function(){return t.e("chunk-ac0c98d6").then(t.bind(null,"b02d"))},SliceEditor:function(){return Promise.resolve().then(t.bind(null,"0fab"))},SliceEditorFields:function(){return t.e("chunk-2d0b1be3").then(t.bind(null,"20c2"))},CopySliceToPage:function(){return t.e("chunk-2d0cc2c6").then(t.bind(null,"4d99"))},Help:function(){return t.e("chunk-2d207ebc").then(t.bind(null,"a31e"))}},mixins:[l["a"]],props:{value:{type:Object,required:!0},child:{type:Boolean,default:!1}},data:function(){return{showDropZone:!1,manageSlice:!1,manageSliceMode:"inserting",pageSlices:[],sliceOpen:!1,showCopyToAnotherPage:!1}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(a["c"])("devise",["component","fieldConfig","sliceConfig"])),Object(a["e"])("devise",["devMode"])),{},{slice:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},sliceSlices:{get:function(){return this.value.slices?this.value.slices:[]},set:function(e){this.$emit("input",e)}},sliceToManage:{get:function(){return"editing"===this.manageSliceMode?this.value:{}},set:function(e){this.$emit("input",e)}},theFields:function(){var e={};for(var s in this.slice)this.slice[s]&&"slices"!==s&&"metadata"!==s&&"settings"!==s&&"object"===Object(d["a"])(this.slice[s])&&(e[s]=this.slice[s],"undefined"===typeof e[s].enabled&&this.$set(e[s],"enabled",!0));return e},sliceHasFieldsOrSlices:function(){var e=Object.keys(this.theFields).length;return this.slice.slices&&(e+=this.slice.slices.length),e>0},hasChildSlot:function(){var e=this.component(this.slice.metadata.name);return!!e.has_child_slot},editorLabel:function(){return this.buildEditorLabel(this.theFields,this.slice.metadata.instance_id)}}),mounted:function(){this.slice.slices&&(this.pageSlices=this.slice.slices)},methods:{toggleSlice:function(){this.sliceOpen=!this.sliceOpen},toggleSliceTools:function(){this.slice.metadata.tools=!this.slice.metadata.tools},markSlice:function(e){window.window.deviseSettings.$bus.$emit("markSlice",this.slice,e)},jumpToSlice:function(){window.window.deviseSettings.$bus.$emit("jumpToSlice",this.slice)},sliceSettings:function(){window.window.deviseSettings.$bus.$emit("openSliceSettings",this.slice)},goToModel:function(e){this.$router.push({name:e.settings.admin.route,params:e.settings.admin.params})},requestInsertSlice:function(){this.hasChildSlot&&(this.manageSliceMode="inserting",this.manageSlice=!0)},addSlice:function(e,s){"undefined"===typeof s&&(s=this.slice),this.$emit("addSlice",e,s),this.manageSlice=!1},requestEditSlice:function(){var e=this;this.manageSliceMode="editing",this.manageSlice=!0,this.$nextTick((function(){e.$refs.manageslice&&(e.$refs.manageslice.action="edit")}))},editSlice:function(e){this.slice=Object.assign({},e),this.manageSlice=!1},copySlice:function(e,s){null===s&&(s=Object.assign({},this.slice)),!1===s&&(s=null),this.$emit("copySlice",e,s)},removeSlice:function(e,s){"undefined"===typeof e?e=this.slice:"undefined"===typeof s&&(s=this.slice),this.$emit("removeSlice",e,s),this.manageSlice=!1},requestCopyToAnotherPage:function(){this.showCopyToAnotherPage=!0},editField:function(e){var s=e.key,t=e.field,n=e.value;this.slice[s]=Object.assign({},n),window.deviseSettings.$bus.$emit("devise-field-edited",{field:t,value:n})},buildEditorLabel:function(e,s){var t={text:"text",number:"text",datetime:"text",image:"url",link:"text",select:"value"},n="";for(var i in this.devMode&&(n='<div class="dvs-text-sm dvs-uppercase dvs-opacity-75">Instance Id: '.concat(s,"</div>")),e)if(e["field"]){var d=e[i];if(d&&d.editorLabel&&d[t[d.type]]){var c=d[t[d.type]];if("image"===d.type?c='<div class="dvs-rounded dvs-bg-cover" style="background-image: url(\''.concat(c,"'); height:100px; width:200px;\"></div>"):"number"!==d.type&&(c="".concat(c.toLowerCase())),c)return"".concat(n,'<div class="dvs-text-xs dvs-opacity-25 dvs-uppercase dvs-leading-tight">').concat(this.slice.metadata.label,'</div>\n                <div class="dvs-capitalize">').concat(c,"</div>")}}return"".concat(n,'<div class="dvs-capitalize">').concat(this.slice.metadata.label,"</div>")}}},r=o,v=t("2877"),u=Object(v["a"])(r,n,i,!1,null,null,null);s["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0afdcd.0f8e1acf.js.map