{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./src/components/media-manager/MediaEditor.vue?ed29","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///src/components/media-manager/MediaEditor.vue","webpack:///./src/components/media-manager/MediaEditor.vue?166e","webpack:///./src/components/media-manager/MediaEditor.vue","webpack:///./node_modules/core-js/internals/array-from.js","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack:///./node_modules/core-js/modules/es.array.from.js"],"names":["_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","done","cancel","attrs","defaultImage","sizeEdits","sizes","encodeEdits","active","showWarning","setActive","staticStyle","activeImage","setCustomSizeToOriginal","selectSizeImage","model","value","callback","$$v","$set","expression","_e","w","h","applyCrop","removeCrop","staticRenderFns","_arrayWithHoles","arr","isArray","_iterableToArrayLimit","i","_i","Symbol","iterator","_s","_arr","_n","_d","next","push","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","components","MediaControls","MediaThumbnails","MediaEditorPreview","VueScrollbar","props","type","String","required","default","imageSettings","data","defaultEdits","q","or","flip","fit","bri","con","gam","sharp","pixel","filt","bg","url","crop","originalw","originalh","computed","baseImageUrl","sizeLabel","mounted","setInitialActive","loadImageSettings","methods","generateAndSaveImages","then","$emit","selectedActive","firstSize","getOriginalDimentions","img","onerror","alert","src","file","Promise","onload","resolve","clean","obj","propName","undefined","substring","setImage","window","deviseSettings","$bus","entries","forEach","createSizeEdit","assign","size","cropSettings","width","height","x","y","property","encodedString","propertyValue","component","bind","toObject","callWithSafeIterationClosing","isArrayIteratorMethod","toLength","createProperty","getIteratorMethod","module","exports","arrayLike","result","step","O","C","argumentsLength","arguments","mapfn","mapping","iteratorMethod","index","$","$entries","target","stat","_arrayLikeToArray","len","arr2","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","key","keys","values","anObject","iteratorClose","fn","ENTRIES","error","checkCorrectnessOfIteration","INCORRECT_ITERATION","iterable","forced"],"mappings":"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","file":"js/chunk-af8c4e94.6c1e6a30.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"\\n    dvs-flex dvs-flex-col dvs-items-stretch dvs-h-screen-90 dvs-overflow-hidden dvs-relative dvs-h\\n  \"},[_c('div',{staticClass:\"\\n      dvs-py-2\\n      dvs-px-8\\n      dvs-rounded-tl\\n      dvs-rounded-tr\\n      dvs-flex\\n      dvs-justify-between\\n      dvs-items-center\\n      dvs-bg-gray-300\\n      dvs-border-b\\n      dvs-border-lighter\\n      dvs-relative\\n    \"},[_vm._v(\" Media Editor \"),_c('div',[_c('button',{staticClass:\"dvs-btn dvs-btn-primary dvs-btn-sm dvs-mr-2\",on:{\"click\":_vm.done}},[_vm._v(\"Done\")]),_c('button',{staticClass:\"dvs-btn dvs-btn-ghost dvs-btn-sm\",on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")])])]),(_vm.activeImage)?_c('div',{staticClass:\"dvs-flex dvs-items-stretch\"},[_c('media-thumbnails',{attrs:{\"default-image\":_vm.defaultImage,\"size-edits\":_vm.sizeEdits,\"sizes\":_vm.sizes,\"encode-edits\":_vm.encodeEdits,\"active\":_vm.active,\"warning\":_vm.showWarning},on:{\"select\":_vm.setActive}}),_c('vue-scrollbar',{staticClass:\"dvs-flex-grow\",staticStyle:{\"height\":\"80vh\"}},[_c('div',{staticClass:\"dvs-relative\"},[(_vm.sizeEdits[_vm.activeImage.name])?_c('media-controls',{attrs:{\"active-image\":_vm.activeImage},on:{\"settooriginal\":_vm.setCustomSizeToOriginal,\"selectsizeimage\":_vm.selectSizeImage},model:{value:(_vm.sizeEdits[_vm.activeImage.name]),callback:function ($$v) {_vm.$set(_vm.sizeEdits, _vm.activeImage.name, $$v)},expression:\"sizeEdits[activeImage.name]\"}}):_vm._e(),(_vm.sizeEdits[_vm.active])?_c('media-editor-preview',{attrs:{\"sizes\":_vm.sizes,\"custom-size\":{ w: _vm.sizeEdits[_vm.active].w, h: _vm.sizeEdits[_vm.active].h },\"active\":_vm.active,\"active-image\":_vm.activeImage,\"encode-edits\":_vm.encodeEdits,\"warning\":_vm.showWarning},on:{\"applycrop\":_vm.applyCrop,\"removecrop\":_vm.removeCrop}}):_vm._e()],1)])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","<template>\n  <div\n    class=\"\n      dvs-flex dvs-flex-col dvs-items-stretch dvs-h-screen-90 dvs-overflow-hidden dvs-relative dvs-h\n    \"\n  >\n    <div\n      class=\"\n        dvs-py-2\n        dvs-px-8\n        dvs-rounded-tl\n        dvs-rounded-tr\n        dvs-flex\n        dvs-justify-between\n        dvs-items-center\n        dvs-bg-gray-300\n        dvs-border-b\n        dvs-border-lighter\n        dvs-relative\n      \"\n    >\n      Media Editor\n      <div>\n        <button class=\"dvs-btn dvs-btn-primary dvs-btn-sm dvs-mr-2\" @click=\"done\">Done</button>\n        <button class=\"dvs-btn dvs-btn-ghost dvs-btn-sm\" @click=\"cancel\">Cancel</button>\n      </div>\n    </div>\n    <div v-if=\"activeImage\" class=\"dvs-flex dvs-items-stretch\">\n      <media-thumbnails\n        :default-image=\"defaultImage\"\n        :size-edits=\"sizeEdits\"\n        :sizes=\"sizes\"\n        :encode-edits=\"encodeEdits\"\n        :active=\"active\"\n        :warning=\"showWarning\"\n        @select=\"setActive\"\n      ></media-thumbnails>\n\n      <vue-scrollbar class=\"dvs-flex-grow\" style=\"height: 80vh\">\n        <div class=\"dvs-relative\">\n          <media-controls\n            v-if=\"sizeEdits[activeImage.name]\"\n            v-model=\"sizeEdits[activeImage.name]\"\n            :active-image=\"activeImage\"\n            @settooriginal=\"setCustomSizeToOriginal\"\n            @selectsizeimage=\"selectSizeImage\"\n          ></media-controls>\n\n          <media-editor-preview\n            v-if=\"sizeEdits[active]\"\n            :sizes=\"sizes\"\n            :custom-size=\"{ w: sizeEdits[active].w, h: sizeEdits[active].h }\"\n            :active=\"active\"\n            :active-image=\"activeImage\"\n            :encode-edits=\"encodeEdits\"\n            :warning=\"showWarning\"\n            @applycrop=\"applyCrop\"\n            @removecrop=\"removeCrop\"\n          ></media-editor-preview>\n        </div>\n      </vue-scrollbar>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\n\nexport default {\n  name: 'DeviseMediaEditor',\n  components: {\n    MediaControls: () => import('./MediaControls'),\n    MediaThumbnails: () => import('./MediaThumbnails'),\n    MediaEditorPreview: () => import('./MediaEditorPreview'),\n    VueScrollbar: () => import('vue2-scrollbar'),\n  },\n  props: {\n    defaultImage: {\n      type: String,\n      required: true,\n    },\n    sizes: {\n      type: Object,\n      default: null,\n    },\n    imageSettings: {\n      type: Object,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      active: 'original',\n      defaultEdits: {\n        q: 70,\n        or: null,\n        flip: null,\n        fit: 'crop',\n        bri: null,\n        con: null,\n        gam: null,\n        sharp: 5,\n        pixel: null,\n        filt: null,\n        bg: null,\n        url: null,\n        crop: null,\n        w: null,\n        h: null,\n        originalw: null,\n        originalh: null,\n      },\n      sizeEdits: {},\n    }\n  },\n\n  computed: {\n    activeImage() {\n      if (this.active && typeof this.sizeEdits !== 'undefined' && this.sizeEdits[this.active]) {\n        return {\n          url: `/styled/preview/${this.sizeEdits[this.active].url}?${this.encodeEdits(\n            this.active\n          )}`,\n          baseImageUrl: `/styled/preview/${this.sizeEdits[this.active].url}`,\n          name: `${this.active}`,\n          sizeLabel: `(${this.sizeEdits[this.active].w}x${this.sizeEdits[this.active].h})`,\n        }\n      }\n      return {\n        url: `/styled/preview/${this.defaultImage}`,\n        name: 'Original',\n      }\n    },\n\n    showWarning() {\n      if (\n        this.sizeEdits[this.active] &&\n        (this.sizeEdits[this.active].fit === null ||\n          this.sizeEdits[this.active].originalw !== this.sizeEdits[this.active].w ||\n          this.sizeEdits[this.active].originalh !== this.sizeEdits[this.active].h)\n      ) {\n        return true\n      }\n      return false\n    },\n  },\n\n  mounted() {\n    this.setInitialActive()\n    this.loadImageSettings()\n  },\n  methods: {\n    ...mapActions('devise', ['generateImages']),\n    done() {\n      this.generateAndSaveImages().then(() => {\n        this.$emit('done')\n      })\n    },\n    cancel() {\n      this.$emit('cancel')\n    },\n    setActive(selectedActive) {\n      this.active = selectedActive\n    },\n    setInitialActive() {\n      if (this.sizes) {\n        const firstSize = Object.keys(this.sizes)[0]\n        this.setActive(firstSize)\n        return true\n      }\n\n      this.setActive('custom')\n      return false\n    },\n    getOriginalDimentions() {\n      const file = `/styled/preview/${this.defaultImage}`\n      const img = new Image()\n\n      img.onerror = () => {\n        alert(`not a valid file: ${file.type}`) // eslint-disable-line\n      }\n\n      img.src = file\n      return new Promise((resolve) => {\n        img.onload = () => {\n          this.$nextTick(() => {\n            resolve(img)\n          })\n        }\n      })\n    },\n    setCustomSizeToOriginal() {\n      const activeImage = this.sizeEdits[this.active]\n      activeImage.w = activeImage.originalw\n      activeImage.h = activeImage.originalh\n    },\n    clean(obj) {\n      for (const propName in obj) {\n        if (obj[propName] === null || obj[propName] === undefined) {\n          delete obj[propName]\n        } else if (propName === 'bg') {\n          obj[propName] = obj[propName].substring(1)\n        }\n      }\n\n      return obj\n    },\n\n    setImage(file) {\n      this.sizeEdits[this.active].url = file.url\n    },\n\n    generateAndSaveImages() {\n      return new Promise(() => {\n        window.deviseSettings.$bus.$emit('showLoadScreen', 'Images being generated')\n        this.generateImages({ defaultImage: this.defaultImage, sizes: this.sizeEdits })\n          .then((response) => {\n            this.$emit('generatedImages', {\n              images: response.data,\n              settings: this.sizeEdits,\n            })\n            return true\n          })\n          .then(\n            () => {\n              window.deviseSettings.$bus.$emit('hideLoadScreen')\n            },\n            () => {\n              window.deviseSettings.$bus.$emit('hideLoadScreen')\n            }\n          )\n      })\n    },\n    loadImageSettings() {\n      if (this.sizes) {\n        Object.entries(this.sizes).forEach(([name, size]) => {\n          if (name !== 'custom') {\n            this.createSizeEdit(name, size)\n          }\n        })\n      } else {\n        this.createSizeEdit('custom')\n      }\n    },\n    createSizeEdit(name, size) {\n      // Create the size\n      this.$set(this.sizeEdits, name, {})\n\n      // Set the defaults and override those with anything loaded from the database\n      this.sizeEdits[name] = Object.assign({}, this.defaultEdits, this.imageSettings[name])\n\n      // If there is no url use the default image\n      if (!this.sizeEdits[name].url) {\n        this.sizeEdits[name].url = this.defaultImage\n      }\n\n      // If there is a size specified by the slice then use that for the initial\n      // size but only if there isn't a size set already by the database\n      if (size) {\n        if (this.sizeEdits[name].w === null || !this.sizeEdits[name].h === null) {\n          this.sizeEdits[name].w = size.w\n          this.sizeEdits[name].h = size.h\n        }\n        this.sizeEdits[name].originalw = size.w\n        this.sizeEdits[name].originalh = size.h\n        // If there is no size we know it's non-slice set size - probably a custom\n        // from the admin. Let's get the sizes from the selected image and populate\n        // those if they aren't already loaded from the db.\n      } else if (this.sizeEdits[name].w === null || !this.sizeEdits[name].h === null) {\n        this.getOriginalDimentions().then((img) => {\n          this.sizeEdits[name].w = img.width\n          this.sizeEdits[name].h = img.height\n          this.sizeEdits[name].originalw = img.width\n          this.sizeEdits[name].originalh = img.height\n        })\n      }\n    },\n    selectSizeImage() {\n      this.$emit('selectsizeimage', this.active)\n    },\n    applyCrop(cropSettings) {\n      this.$set(this.sizeEdits[this.activeImage.name], 'crop', {\n        w: cropSettings.width,\n        h: cropSettings.height,\n        x: cropSettings.x,\n        y: cropSettings.y,\n      })\n    },\n    removeCrop() {\n      this.$set(this.sizeEdits[this.activeImage.name], 'crop', null)\n    },\n    encodeEdits(size) {\n      let encodedString = ''\n\n      // eslint-disable-next-line guard-for-in\n      for (const property in this.sizeEdits[size]) {\n        if (this.sizeEdits[size][property] !== null) {\n          if (encodedString !== '') {\n            encodedString += '&'\n          }\n\n          let propertyValue = this.sizeEdits[size][property]\n\n          // Chop off the hash for Glide\n          if (property === 'bg') {\n            propertyValue = propertyValue.substring(1)\n          }\n\n          if (property === 'crop') {\n            propertyValue = `${propertyValue.w},${propertyValue.h},${propertyValue.x},${propertyValue.y}`\n          }\n\n          encodedString += `${property}=${propertyValue}`\n        }\n      }\n\n      return encodedString\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaEditor.vue?vue&type=template&id=0cccf3d1&\"\nimport script from \"./MediaEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator);\n    throw error;\n  }\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n"],"sourceRoot":""}