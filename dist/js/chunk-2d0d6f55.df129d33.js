(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6f55"],{7589:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("portal",{attrs:{to:"devise-root"}},[s("div",{staticClass:"dvs-fixed dvs-inset-0 dvs-flex dvs-justify-center dvs-items-center dvs-z-40"},[s("div",{staticClass:"dvs-blocker",on:{click:e.cancelManageSlice}})]),s("div",{staticClass:"relative dvs-z-50 dvs-w-full dvs-pt-6"},[s("admin-container",{scopedSlots:e._u([{key:"message",fn:function(){return[e._v(" Adding new slices builds up your page. Below you will find the settings that will effect what template to use and if it is static or dynamic. ")]},proxy:!0},{key:"content",fn:function(){return[s("div",{staticClass:"dvs-w-full dvs-relative dvs-z-40"},[s("div",{staticClass:"dvs-p-8"},[s("transition",{attrs:{name:"dvs-fade"}},[null===e.managedSlice.type?s("div",{staticClass:"dvs-flex dvs-justify-between dvs-items-stretch dvs-w-full"},[s("div",{staticClass:"\n                      dvs-btn\n                      dvs-btn-secondary\n                      dvs-text-base\n                      dvs-mr-4\n                      dvs-p-8\n                      dvs-w-1/2\n                      dvs-shadow-lg\n                    ",on:{click:function(t){e.managedSlice.type="single"}}},[s("div",{staticClass:"dvs-pb-2"},[e._v("Static Slice")]),s("div",{staticClass:"dvs-text-4xl dvs-mb-4 dvs-flex dvs-justify-center"},[s("file-text-icon")],1),s("p",{staticClass:"\n                        dvs-normal-case dvs-text-sm dvs-text-admin-secondary-fg dvs-font-normal\n                      "},[e._v(" A static slice contains information that content managers enter and is presented on the site. The content does not change until a content manager chooses to edit. ")])]),e.modelQueries.length>0?s("div",{staticClass:"\n                      dvs-btn\n                      dvs-btn-secondary\n                      dvs-text-base\n                      dvs-ml-4\n                      dvs-p-8\n                      dvs-w-1/2\n                      dvs-shadow-lg\n                    ",on:{click:function(t){e.managedSlice.type="model"}}},[s("div",{staticClass:"dvs-pb-2"},[e._v("Dynamic Slice")]),s("div",{staticClass:"dvs-text-4xl dvs-mb-4 dvs-flex dvs-justify-center"},[s("database-icon")],1),s("p",{staticClass:"\n                        dvs-normal-case dvs-text-sm dvs-text-admin-secondary-fg dvs-font-normal\n                      "},[e._v(" Dynamic slices will be populated by data from the database. Depending on your options on the next screen multiple instances of the slice you select will appear. As models are edited the information on these instances will change. ")])]):e._e()]):s("div",[1===e.step&&"model"===e.managedSlice.type?s("div",[s("div",{staticClass:"dvs-mb-16"},[e.modelQueries.length>0?s("query-selector",{model:{value:e.modelQuery,callback:function(t){e.modelQuery=t},expression:"modelQuery"}}):e._e()],1)]):s("div",[s("div",{staticClass:"dvs-mb-16"},[s("slice-selector",{attrs:{"model-query":e.modelQuery},model:{value:e.managedSlice.slice,callback:function(t){e.$set(e.managedSlice,"slice",t)},expression:"managedSlice.slice"}})],1)])])])],1)]),null!==e.managedSlice.type?s("div",{staticClass:"\n              dvs-fixed\n              dvs-z-40\n              dvs-bottom-0\n              dvs-right-0\n              dvs-mr-1\n              dvs-mb-4\n              dvs-mr-10\n              dvs-text-xs\n              dvs-z-10\n              dvs-p-6\n              dvs-bg-admin-bg\n              dvs-text-admin-fg\n              dvs-rounded\n              dvs-shadow\n              dvs-px-6\n            "},["inserting"===e.mode&&"model"!==e.managedSlice.type?s("button",{staticClass:"dvs-btn dvs-btn-primary dvs-mr-2",on:{click:e.addSlice}},[e._v(" Insert ")]):"model"===e.managedSlice.type&&1===e.step?s("button",{staticClass:"dvs-btn dvs-btn-primary dvs-mr-2",attrs:{disabled:e.modelQueryInvalid},on:{click:e.nextStep}},[e._v(" Next ")]):"inserting"===e.mode&&"model"===e.managedSlice.type&&2===e.step?s("button",{staticClass:"dvs-btn dvs-btn-primary dvs-mr-2",on:{click:e.addSlice}},[e._v(" Insert Model Slice ")]):s("button",{staticClass:"dvs-btn dvs-btn-primary dvs-mr-2",on:{click:e.editSlice}},[e._v(" Replace ")]),s("button",{staticClass:"dvs-btn dvs-btn-secondary",on:{click:e.cancelManageSlice}},[e._v("Cancel")])]):e._e()]},proxy:!0}])})],1)])],1)},i=[],l=s("5530"),d=(s("d3b7"),s("3ca3"),s("ddb0"),s("159b"),s("7db0"),s("fb6a"),s("b0c0"),s("2f62")),a={methods:{buildSliceDirectoryOptions:function(e,t){t.files.length>0&&(e[t.name]=[],e[t.name]=t.files);for(var s=0;s<t.directories.length;s+1)e=Object.assign({},e,this.buildSliceDirectoryOptions(e,t.directories[s]));return e}},computed:{sliceDirectoriesOptions:function(){var e={};return this.slicesDirectories.files&&(this.slicesDirectories.files.length>0||this.slicesDirectories.directories.length>0)&&(e=this.buildSliceDirectoryOptions(e,this.slicesDirectories)),e}}},c={type:null,slice:null,modelQuery:{key:null,params:[]}},o={name:"ManageSlice",components:{AdminContainer:function(){return s.e("chunk-2d0e6364").then(s.bind(null,"987f"))},QuerySelector:function(){return s.e("chunk-2d226caa").then(s.bind(null,"e9bb"))},SliceSelector:function(){return s.e("chunk-6e29247d").then(s.bind(null,"8795"))},FileTextIcon:function(){return s.e("chunk-ac0a919a").then(s.bind(null,"d77b"))},DatabaseIcon:function(){return s.e("chunk-ac39e018").then(s.bind(null,"0670"))}},mixins:[a],props:{value:{type:Object|String,default:function(){}},mode:{type:String,required:!0}},data:function(){return{managedSlice:{},step:1,modelQuery:{key:null,params:[]}}},computed:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(d["c"])("devise",["componentFromView"])),Object(d["e"])("devise",["modelQueries"])),{},{slice:function(){return Object.assign({},this.value)},modelQueryFormatted:function(){return this.modelQuery&&this.modelQuery.key?this.modelQuery:null},modelQueryInvalid:function(){return!this.modelQueryConfig||(this.modelQueryConfig.params.forEach((function(e){return!e.allowedNull&&!e.value})),!1)},modelQueryConfig:function(){var e=this;if(this.modelQuery){var t=this.modelQueries.find((function(t){return t.key===e.modelQuery.key}));return t}return null}}),mounted:function(){var e=this;this.managedSlice=Object.assign({},c),this.getModelQueries(),this.getSlicesDirectories(),this.$nextTick((function(){e.slice&&e.slice.metadata&&(e.managedSlice.type=e.slice.metadata.type,e.modelQuery=JSON.parse(JSON.stringify(e.slice.metadata.model_query)))}))},methods:Object(l["a"])(Object(l["a"])({},Object(d["b"])("devise",["getModelQueries","getSlicesDirectories","getModelSettings"])),{},{cancelManageSlice:function(){this.$set(this,"managedSlice",c),this.$emit("cancel")},buildSlice:function(){var e=this.componentFromView(this.managedSlice.slice.value),t={settings:{enabled:!0},metadata:{instance_id:0,label:this.managedSlice.slice.name,model_query:this.modelQueryFormatted,name:e.name,type:this.managedSlice.type,view:e.view,has_child_slot:e.has_child_slot}};for(var s in e.fields)if(e.fields[s]){var n=e.fields[s].default;t[s]={},this.addMissingProperty(t,s),this.setDefaults(t,s,n)}return Object.assign({},t)},addMissingProperty:function(e,t){this.$set(e,t,{text:null,url:null,target:null,color:null,checked:null,enabled:null})},setDefaults:function(e,t,s){for(var n in s)s[n]&&this.$set(e[t],n,s[n])},nextStep:function(){this.step+=1},addSlice:function(){this.$emit("addSlice",this.buildSlice())},editSlice:function(){this.$emit("input",Object.assign({},this.buildSlice()))},removeSlice:function(){this.$emit("removeSlice")}})},r=o,u=s("2877"),v=Object(u["a"])(r,n,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0d6f55.df129d33.js.map