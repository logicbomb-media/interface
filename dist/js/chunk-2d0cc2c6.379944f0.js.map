{"version":3,"sources":["webpack:///./src/components/pages/slices/CopySliceToPage.vue?fcd2","webpack:///src/components/pages/slices/CopySliceToPage.vue","webpack:///./src/components/pages/slices/CopySliceToPage.vue?dfba","webpack:///./src/components/pages/slices/CopySliceToPage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","_v","proxy","directives","name","rawName","value","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","siteToCopyTo","multiple","clearSearch","_l","sites","site","id","domProps","_s","attrs","requestSearch","composing","searchTerm","result","selectPage","title","verison_name","language","pageToCopyTo","_e","confirmCopy","close","staticRenderFns","components","AdminContainer","props","slice","type","Object","required","data","searchResults","computed","mounted","currentPage","methods","searchPageVersions","assign","page","copyPageSlice","copy_slice_id","metadata","instance_id","page_version_id","$emit","component"],"mappings":"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","file":"js/chunk-2d0cc2c6.379944f0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('admin-container',{staticClass:\"dvs-mt-16\",scopedSlots:_vm._u([{key:\"message\",fn:function(){return [_vm._v(\" This allows you to copy slice (field data and all!) to another page. \")]},proxy:true},{key:\"content\",fn:function(){return [_c('div',{staticClass:\"dvs-p-8 dvs-text-admin-fg\"},[_c('div',{staticClass:\"dvs-mb-8\"},[_c('fieldset',{staticClass:\"dvs-fieldset dvs-mb-4\"},[_c('label',[_vm._v(\"Site to copy to\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.siteToCopyTo),expression:\"siteToCopyTo\"}],staticClass:\"dvs-w-full\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.siteToCopyTo=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.clearSearch]}},_vm._l((_vm.sites.data),function(site){return _c('option',{key:site.id,domProps:{\"value\":site.id}},[_vm._v(\" \"+_vm._s(site.name)+\" \")])}),0)]),_c('fieldset',{staticClass:\"dvs-fieldset\"},[_c('label',[_vm._v(\"Search for Page\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchTerm),expression:\"searchTerm\"}],staticClass:\"dvs-w-full\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchTerm)},on:{\"keyup\":_vm.requestSearch,\"input\":function($event){if($event.target.composing){ return; }_vm.searchTerm=$event.target.value}}})]),_c('div',{staticClass:\"dvs-fixed dvs-z-10 dvs-w-1/3\"},[_c('ul',{staticClass:\"dvs-bg-white dvs-absolute dvs-text-black dvs-rounded-sm dvs-mt-2 dvs-text-sm\"},_vm._l((_vm.searchResults),function(result){return _c('li',{key:result.id,staticClass:\"dvs-px-4 dvs-py-2 dvs-border-b dvs-border-gray-500dvs-cursor-pointer\",on:{\"click\":function($event){return _vm.selectPage(result)}}},[_vm._v(\" \"+_vm._s(result.site)+\": \"+_vm._s(result.title)+\" - \"+_vm._s(result.verison_name)+\" (\"+_vm._s(result.language)+\") \")])}),0)])]),(_vm.pageToCopyTo.site)?_c('div',{staticClass:\"dvs-mb-8\"},[_vm._v(\" Copying to: \"+_vm._s(_vm.pageToCopyTo.site)+\" \"+_vm._s(_vm.pageToCopyTo.title)+\" \"+_vm._s(_vm.pageToCopyTo.verison_name)+\" (\"+_vm._s(_vm.pageToCopyTo.language)+\") \")]):_vm._e(),_c('button',{staticClass:\"dvs-btn dvs-btn-primary dvs-mr-2\",attrs:{\"disabled\":!_vm.pageToCopyTo.site},on:{\"click\":_vm.confirmCopy}},[_vm._v(\" Confirm \")]),_c('button',{staticClass:\"dvs-btn dvs-btn-secondary\",on:{\"click\":_vm.close}},[_vm._v(\"Cancel\")])])]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <admin-container class=\"dvs-mt-16\">\n    <template v-slot:message>\n      This allows you to copy slice (field data and all!) to another page.\n    </template>\n    <template v-slot:content>\n      <div class=\"dvs-p-8 dvs-text-admin-fg\">\n        <div class=\"dvs-mb-8\">\n          <fieldset class=\"dvs-fieldset dvs-mb-4\">\n            <label>Site to copy to</label>\n            <select v-model=\"siteToCopyTo\" class=\"dvs-w-full\" @change=\"clearSearch\">\n              <option v-for=\"site in sites.data\" :key=\"site.id\" :value=\"site.id\">\n                {{ site.name }}\n              </option>\n            </select>\n          </fieldset>\n\n          <fieldset class=\"dvs-fieldset\">\n            <label>Search for Page</label>\n            <input v-model=\"searchTerm\" type=\"text\" class=\"dvs-w-full\" @keyup=\"requestSearch\" />\n          </fieldset>\n\n          <div class=\"dvs-fixed dvs-z-10 dvs-w-1/3\">\n            <ul\n              class=\"dvs-bg-white dvs-absolute dvs-text-black dvs-rounded-sm dvs-mt-2 dvs-text-sm\"\n            >\n              <li\n                v-for=\"result in searchResults\"\n                :key=\"result.id\"\n                class=\"dvs-px-4 dvs-py-2 dvs-border-b dvs-border-gray-500dvs-cursor-pointer\"\n                @click=\"selectPage(result)\"\n              >\n                {{ result.site }}: {{ result.title }} - {{ result.verison_name }} ({{\n                  result.language\n                }})\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div v-if=\"pageToCopyTo.site\" class=\"dvs-mb-8\">\n          Copying to: {{ pageToCopyTo.site }} {{ pageToCopyTo.title }}\n          {{ pageToCopyTo.verison_name }} ({{ pageToCopyTo.language }})\n        </div>\n        <button\n          class=\"dvs-btn dvs-btn-primary dvs-mr-2\"\n          :disabled=\"!pageToCopyTo.site\"\n          @click=\"confirmCopy\"\n        >\n          Confirm\n        </button>\n        <button class=\"dvs-btn dvs-btn-secondary\" @click=\"close\">Cancel</button>\n      </div>\n    </template>\n  </admin-container>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\n\nexport default {\n  name: 'CopySliceToPage',\n  components: {\n    AdminContainer: () => import('../../admin/ui/AdminContainer'),\n  },\n  props: {\n    slice: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      searchTerm: '',\n      searchResults: [],\n      siteToCopyTo: null,\n      pageToCopyTo: {},\n    }\n  },\n  computed: {\n    ...mapState('devise', ['sites']),\n  },\n  mounted() {\n    this.siteToCopyTo = this.currentPage.site.id\n  },\n  methods: {\n    ...mapActions('devise', ['searchPageVersions', 'copyPageSlice']),\n    requestSearch() {\n      this.searchPageVersions({ term: this.searchTerm, site_id: this.siteToCopyTo }).then(\n        (results) => {\n          this.searchResults = []\n          for (const id in results.data) {\n            if (results.data[id]) {\n              const result = results.data[id]\n              if (result.site_id === this.siteToCopyTo) {\n                this.searchResults.push(result)\n              }\n            }\n          }\n        }\n      )\n    },\n    selectPage(page) {\n      this.pageToCopyTo = Object.assign({}, page)\n      this.clearSearch()\n    },\n    confirmCopy() {\n      this.copyPageSlice({\n        copy_slice_id: this.slice.metadata.instance_id,\n        page_version_id: this.pageToCopyTo.id,\n      }).then(() => {\n        this.close()\n      })\n    },\n    clearSearch() {\n      this.searchResults = []\n      this.searchTerm = ''\n    },\n    close() {\n      this.$emit('close')\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CopySliceToPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CopySliceToPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CopySliceToPage.vue?vue&type=template&id=710d55f7&\"\nimport script from \"./CopySliceToPage.vue?vue&type=script&lang=js&\"\nexport * from \"./CopySliceToPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}